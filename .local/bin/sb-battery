#!/usr/bin/env sh

for battery in /sys/class/power_supply/BAT?*; do
    [ -n "${capacity+x}" ] && printf " "
    capacity="$(cat "$battery/capacity" 2>&1)"
    case "$(cat "$battery/status" 2>&1)" in
        "Charging") status="Û∞ÇÑ" ;;
        "Full") status="Û∞Åπ" ;;
        "Discharging" | "Not charging")
            case 1 in
                $((capacity == 100))) status="Û∞Åπ" ;;
                $((capacity >= 90))) status="Û∞ÇÇ" ;;
                $((capacity >= 80))) status="Û∞ÇÇ" ;;
                $((capacity >= 70))) status="Û∞ÇÄ" ;;
                $((capacity >= 60))) status="Û∞Åø" ;;
                $((capacity >= 50))) status="Û∞Åæ" ;;
                $((capacity >= 40))) status="Û∞ÅΩ" ;;
                $((capacity >= 30))) status="Û∞Åº" ;;
                $((capacity >= 20))) status="Û∞Åª" ;;
                $((capacity >= 0))) status="Û∞Å∫" ;;
            esac
            ;;
        "Unknown") status="Û∞Çë " ;;
        *) exit 1 ;;
    esac
    echo "[32;4m $status $capacity% [0m"
done && echo
